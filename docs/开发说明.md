# 🛠️ 网站推荐系统 - 开发说明文档

## 📋 界面优化记录

### 🎨 主界面显示优化

#### 问题描述
- 网站卡片内容显示不完整
- 描述文字被截断
- CSS 出现 `Unknown property box-shadow` 警告

#### 解决方案

1. **卡片尺寸调整**
   ```python
   # 原来: 300x150
   self.setFixedSize(380, 200)  # 增大到 380x200
   ```

2. **描述区域优化**
   ```python
   # 增加描述区域高度和字体大小
   desc_font = QFont("Microsoft YaHei", 10)  # 从9增加到10
   desc_label.setMaximumHeight(60)  # 从40增加到60
   desc_label.setMinimumHeight(60)  # 确保固定高度
   ```

3. **布局优化**
   ```python
   # 改为每行2个卡片，显示更完整
   if col >= 2:  # 原来是3个
       col = 0
       row += 1
   ```

4. **CSS警告修复**
   ```python
   # 移除不兼容的 box-shadow 属性
   # PyQt6 不支持 CSS box-shadow 属性
   ```

### 🗂️ 文档结构优化

#### 创建docs文件夹
- 将项目结构说明移动到 `docs/` 文件夹
- 创建开发说明文档
- 保持 README.md 在根目录

## 🔧 技术细节

### PyQt6 样式限制
- 不支持 `box-shadow` 属性
- 不支持某些高级 CSS3 特性
- 建议使用基础的边框和背景样式

### 界面响应式设计
- 卡片固定尺寸确保内容完整显示
- 网格布局自适应窗口大小
- 滚动区域支持大量网站展示

### 性能优化建议
- 使用 QGridLayout 提高布局性能
- 避免频繁的样式表更新
- 合理设置组件的最小/最大尺寸

## 🐛 已修复的问题

1. ✅ 网站卡片内容显示不完整
2. ✅ CSS box-shadow 警告
3. ✅ 描述文字被截断
4. ✅ 布局列数不合理
5. ✅ 主界面关闭后未消失的问题
6. ✅ 布局不能自适应窗口大小的问题

## 🔧 最新优化内容

### 窗口管理优化
- 修复主窗口关闭时未正确清理的问题
- 改进登出流程，确保窗口正确关闭和显示
- 添加窗口关闭确认对话框

### 自适应布局优化
- 根据窗口宽度自动计算每行卡片数量
- 支持1-4个卡片的动态布局
- 添加窗口大小改变时的延迟更新机制

### 代码改进
```python
# 自适应布局计算
window_width = self.width()
card_width = 400  # 卡片宽度 + 间距
available_width = window_width - 300  # 减去左侧面板宽度
cols_per_row = max(1, min(4, available_width // card_width))

# 窗口管理改进
self.main_window.hide()  # 先隐藏
self.main_window.close()  # 再关闭
self.main_window.deleteLater()  # 确保删除
```

## 📝 开发注意事项

### 代码规范
- 使用 UTF-8 编码
- 遵循 PEP 8 代码风格
- 添加适当的中文注释

### 界面设计原则
- 保持界面简洁美观
- 确保内容完整可读
- 提供良好的用户体验

### 测试建议
- 测试不同分辨率下的显示效果
- 验证所有功能按钮的响应
- 检查数据库连接的稳定性

---

*最后更新: 2025年8月5日*